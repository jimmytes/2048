System.register("chunks:///_virtual/block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,c,l,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,l=e.SpriteFrame,a=e.Sprite,p=e.Component}],execute:function(){var s,u,b,f,k,y,h;n._RF.push({},"e580btrgIJEQ46iO4PnUcQn","block",void 0);var _=c.ccclass,g=c.property;e("block",(s=_("block"),u=g({type:l}),b=g(a),s((y=t((k=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,i(t,"block_Res",y,o(t)),i(t,"block_Sprite",h,o(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.setCreateBlockSprite=function(e){this.block_Sprite.spriteFrame=this.block_Res[{2:0,4:1,8:2,16:3,32:4,64:5,128:6,256:7,512:8,1024:9,2048:10}[Math.pow(2,e)]]},t}(p)).prototype,"block_Res",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=t(k.prototype,"block_Sprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=k))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Canvas,g=t.UITransform,h=t.instantiate,c=t.Label,p=t.Color,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[p.WHITE,p.BLACK,p.RED,p.GREEN,p.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(a)){var t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=h(s);l.parent=this.node,l.name="Buttons";var r=h(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=h(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(c);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=p.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?h(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=x;var E=h(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=h(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=h(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?h(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gVariable.ts"],(function(o){"use strict";var e,t,l,c,r,i,g,n,s,m,h,a,k,u,b,B,f,N,S;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,l=o.initializerDefineProperty,c=o.assertThisInitialized},function(o){r=o.cclegacy,i=o._decorator,g=o.Prefab,n=o.Label,s=o.Node,m=o.input,h=o.Input,a=o.sys,k=o.instantiate,u=o.tween,b=o.Vec3,B=o.easing,f=o.Vec2,N=o.Component},function(o){S=o.gVariable}],execute:function(){var w,p,v,d,M,F,y,C,I,P,x,O,T;r._RF.push({},"fda4dZCK+FE/4QHuWcnGUXb","game",void 0);var E=i.ccclass,D=i.property;o("game",(w=E("game"),p=D(g),v=D(n),d=D(n),M=D(n),F=D(s),w((I=e((C=function(o){function e(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e=o.call.apply(o,[this].concat(r))||this,l(e,"numBlock",I,c(e)),l(e,"hightestScore",P,c(e)),l(e,"nowScore",x,c(e)),l(e,"maxMergeScore",O,c(e)),l(e,"UINode",T,c(e)),e.touchStartPos=new f,e.touchEndPos=new f,e.block=null,e.nowMoveBlock=null,e.moveFlag=!1,e.mergeFlag=!1,e.mergeBlock1=null,e.mergeBlock2=null,e}t(e,o);var r=e.prototype;return r.onLoad=function(){m.on(h.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on(s.EventType.TOUCH_START,this.onTouch,this),this.node.on(s.EventType.TOUCH_END,this.onTouch,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouch,this)},r.start=function(){null!=a.localStorage.getItem("hightestScore")&&null!=a.localStorage.getItem("hightestScore")&&(this.hightestScore.string=a.localStorage.getItem("hightestScore")),null!=a.localStorage.getItem("maxMerge")&&null!=a.localStorage.getItem("maxMerge")&&(this.maxMergeScore.string=a.localStorage.getItem("maxMerge")),this.createBlock()},r.update=function(o){},r.onKeyDown=function(o){switch(o.keyCode){case S.keyBoard.up:this.moveBlock("up",!0),console.log("Up key pressed");break;case S.keyBoard.down:this.moveBlock("down",!0),console.log("Down key pressed");break;case S.keyBoard.left:this.moveBlock("left",!0),console.log("Left key pressed");break;case S.keyBoard.right:this.moveBlock("right",!0),console.log("Right key pressed")}},r.onTouch=function(o){"touch-start"==o.type?(console.log("觸摸開始"),this.touchStartPos=o.getLocation()):(console.log("觸摸結束"),this.touchEndPos=o.getLocation(),this.getDtrection())},r.getAngle=function(o,e){return 180*Math.atan2(e,o)/Math.PI},r.getDtrection=function(){var o=this.touchEndPos.x-this.touchStartPos.x,e=this.touchEndPos.y-this.touchStartPos.y,t="";if(Math.abs(o)<2&&Math.abs(e)<2)return t;var l=this.getAngle(o,e);return l>=-135&&l<=-45?(this.moveBlock("down",!0),t="down"):l>45&&l<135?(this.moveBlock("up",!0),t="up"):l>=135&&l<=180||l>=-180&&l<-135?(this.moveBlock("left",!0),t="left"):l>=-45&&l<=45&&(this.moveBlock("right",!0),t="right"),console.log("滑動方向: "+t),t},r.createBlock=function(){var o=Math.floor(4*Math.random()),e=Math.floor(4*Math.random());null==S.blockNum[o][e]?(this.block=k(this.numBlock),this.block.setPosition(S.blockPos[o][e].X,S.blockPos[o][e].Y),Math.random()<=1/6?(this.block.getComponent("block").setCreateBlockSprite(2),this.block.tag=2):(this.block.getComponent("block").setCreateBlockSprite(1),this.block.tag=1),this.node.addChild(this.block),u(this.block).to(.1,{scale:new b(1.1,1.1,1)},{easing:B.backOut}).to(.1,{scale:new b(1,1,1)},{easing:B.backIn}).start(),S.blockNum[o][e]=this.block,console.log(S.blockNum),this.moveFlag=!1,this.gameOver()):this.createBlock()},r.moveBlock=function(o,e){if(console.log(o),"up"==o){for(var t=0;t<4;t++)for(var l=0;l<4;l++)if(null!=S.blockNum[t][l]){this.nowMoveBlock=S.blockNum[t][l];S.blockPos[t][l].X,S.blockPos[t][l].Y;for(var c=null,r=t;r>=0;r--)null==S.blockNum[r][l]&&(c=r);if(null!=c){S.blockNum[c][l]=this.nowMoveBlock,S.blockNum[t][l]=null;var i=S.blockPos[c][l].X,g=S.blockPos[c][l].Y;u(this.nowMoveBlock).to(.1,{position:new b(i,g,0)}).start(),console.log(S.blockNum),this.moveFlag=!0}}1==e&&this.scheduleOnce((function(){this.mergeBlock("up"),1==this.moveFlag&&this.scheduleOnce((function(){this.createBlock()}),.3)}),.2)}else if("down"==o){for(t=3;t>=0;t--)for(l=0;l<4;l++)if(null!=S.blockNum[t][l]){this.nowMoveBlock=S.blockNum[t][l];for(S.blockPos[t][l].X,S.blockPos[t][l].Y,c=null,r=t;r<4;r++)null==S.blockNum[r][l]&&(c=r);if(null!=c){S.blockNum[c][l]=this.nowMoveBlock,S.blockNum[t][l]=null;i=S.blockPos[c][l].X,g=S.blockPos[c][l].Y;u(this.nowMoveBlock).to(.1,{position:new b(i,g,0)}).start(),console.log(S.blockNum),this.moveFlag=!0}}1==e&&this.scheduleOnce((function(){this.mergeBlock("down"),1==this.moveFlag&&this.scheduleOnce((function(){this.createBlock()}),.3)}),.2)}else if("left"==o){for(l=0;l<4;l++)for(t=0;t<4;t++)if(null!=S.blockNum[t][l]){this.nowMoveBlock=S.blockNum[t][l];for(S.blockPos[t][l].X,S.blockPos[t][l].Y,c=null,r=l;r>=0;r--)null==S.blockNum[t][r]&&(c=r);if(null!=c){S.blockNum[t][c]=this.nowMoveBlock,S.blockNum[t][l]=null;i=S.blockPos[t][c].X,g=S.blockPos[t][c].Y;u(this.nowMoveBlock).to(.1,{position:new b(i,g,0)}).start(),console.log(S.blockNum),this.moveFlag=!0}}1==e&&this.scheduleOnce((function(){this.mergeBlock("left"),1==this.moveFlag&&this.scheduleOnce((function(){this.createBlock()}),.3)}),.2)}else if("right"==o){for(l=3;l>=0;l--)for(t=3;t>=0;t--)if(null!=S.blockNum[t][l]){this.nowMoveBlock=S.blockNum[t][l];for(S.blockPos[t][l].X,S.blockPos[t][l].Y,c=null,r=l;r<4;r++)null==S.blockNum[t][r]&&(c=r);if(null!=c){S.blockNum[t][c]=this.nowMoveBlock,S.blockNum[t][l]=null;i=S.blockPos[t][c].X,g=S.blockPos[t][c].Y;u(this.nowMoveBlock).to(.1,{position:new b(i,g,0)}).start(),console.log(S.blockNum),this.moveFlag=!0}}1==e&&this.scheduleOnce((function(){this.mergeBlock("right"),1==this.moveFlag&&this.scheduleOnce((function(){this.createBlock()}),.3)}),.2)}},r.mergeBlock=function(o){if("up"==o){if(0==this.mergeFlag)for(var e=0;e<3;e++)for(var t=0;t<4;t++)null!=S.blockNum[e][t]&&null!=S.blockNum[e+1][t]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e+1][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e+1][t].destroy(),S.blockNum[e+1][t]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(e=0;e<2;e++)for(t=0;t<4;t++)null!=S.blockNum[e][t]&&null!=S.blockNum[e+2][t]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e+2][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e+1][t]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e+2][t].destroy(),S.blockNum[e+2][t]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(t=0;t<4;t++)null!=S.blockNum[0][t]&&null!=S.blockNum[3][t]&&(this.mergeBlock1=S.blockNum[0][t],this.mergeBlock2=S.blockNum[3][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[1][t]&&null==S.blockNum[2][t]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[3][t].destroy(),S.blockNum[3][t]=null,this.moveFlag=!0,this.mergeFlag=!0));this.moveBlock("up",!1),this.mergeFlag=!1}if("down"==o){if(0==this.mergeFlag)for(e=3;e>0;e--)for(t=0;t<4;t++)null!=S.blockNum[e][t]&&null!=S.blockNum[e-1][t]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e-1][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e-1][t].destroy(),S.blockNum[e-1][t]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(e=3;e>1;e--)for(t=0;t<4;t++)null!=S.blockNum[e][t]&&null!=S.blockNum[e-2][t]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e-2][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e-1][t]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e-2][t].destroy(),S.blockNum[e-2][t]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(t=0;t<4;t++)null!=S.blockNum[3][t]&&null!=S.blockNum[0][t]&&(this.mergeBlock1=S.blockNum[3][t],this.mergeBlock2=S.blockNum[0][t],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[2][t]&&null==S.blockNum[1][t]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[0][t].destroy(),S.blockNum[0][t]=null,this.moveFlag=!0,this.mergeFlag=!0));this.moveBlock("down",!1),this.mergeFlag=!1}if("left"==o){if(0==this.mergeFlag)for(t=0;t<3;t++)for(e=0;e<4;e++)null!=S.blockNum[e][t]&&null!=S.blockNum[e][t+1]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e][t+1],this.mergeBlock1.tag==this.mergeBlock2.tag&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][t+1].destroy(),S.blockNum[e][t+1]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(t=0;t<2;t++)for(e=0;e<4;e++)null!=S.blockNum[e][t]&&null!=S.blockNum[e][t+2]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e][t+2],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e][t+1]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][t+2].destroy(),S.blockNum[e][t+2]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(e=0;e<4;e++)null!=S.blockNum[e][0]&&null!=S.blockNum[e][3]&&(this.mergeBlock1=S.blockNum[e][0],this.mergeBlock2=S.blockNum[e][3],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e][1]&&null==S.blockNum[e][2]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][3].destroy(),S.blockNum[e][3]=null,this.moveFlag=!0,this.mergeFlag=!0));this.moveBlock("left",!1),this.mergeFlag=!1}if("right"==o){if(0==this.mergeFlag)for(t=3;t>0;t--)for(e=0;e<4;e++)null!=S.blockNum[e][t]&&null!=S.blockNum[e][t-1]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e][t-1],this.mergeBlock1.tag==this.mergeBlock2.tag&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][t-1].destroy(),S.blockNum[e][t-1]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(t=3;t>1;t--)for(e=0;e<4;e++)null!=S.blockNum[e][t]&&null!=S.blockNum[e][t-2]&&(this.mergeBlock1=S.blockNum[e][t],this.mergeBlock2=S.blockNum[e][t-2],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e][t-1]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][t-2].destroy(),S.blockNum[e][t-2]=null,this.moveFlag=!0,this.mergeFlag=!0));if(this.mergeBlock1=null,this.mergeBlock2=null,0==this.mergeFlag)for(e=0;e<4;e++)null!=S.blockNum[e][3]&&null!=S.blockNum[e][0]&&(this.mergeBlock1=S.blockNum[e][3],this.mergeBlock2=S.blockNum[e][0],this.mergeBlock1.tag==this.mergeBlock2.tag&&null==S.blockNum[e][2]&&null==S.blockNum[e][1]&&(this.mergeBlock1.tag+=1,this.mergeBlock1.getComponent("block").setCreateBlockSprite(this.mergeBlock1.tag),S.nowScore+=Math.pow(2,this.mergeBlock1.tag),this.nowScore.string=S.nowScore.toString(),S.blockNum[e][0].destroy(),S.blockNum[e][0]=null,this.moveFlag=!0,this.mergeFlag=!0));this.moveBlock("right",!1),this.mergeFlag=!1}},r.gameOver=function(){var o=null,e=null,t=null,l=[],c=!1,r=S.blockNum.some((function(o){return o.some((function(o){return null==o}))}));if(console.log("檢查空格: "+r),0==r){for(var i=0;i<4;i++)for(var g=0;g<3;g++)if(o=S.blockNum[i][g],e=S.blockNum[i][g+1],o.tag==e.tag){c=!0;break}for(g=0;g<4;g++)for(i=0;i<3;i++)if(o=S.blockNum[i][g],e=S.blockNum[i+1][g],o.tag==e.tag){c=!0;break}if(0==c){console.log("gameOver"),this.UINode.active=!0,null!=a.localStorage.getItem("hightestScore")&&null!=a.localStorage.getItem("hightestScore")||a.localStorage.setItem("hightestScore",S.nowScore.toString()),S.nowScore>parseInt(a.localStorage.getItem("hightestScore"))&&a.localStorage.setItem("hightestScore",S.nowScore.toString());for(g=0;g<4;g++)for(i=0;i<4;i++)t=S.blockNum[i][g],l.push(t.tag);var n=Math.max.apply(Math,l);console.log("最大的合併數值: "+Math.pow(2,n)),null!=a.localStorage.getItem("maxMerge")&&null!=a.localStorage.getItem("maxMerge")||a.localStorage.setItem("maxMerge",Math.pow(2,n).toString()),Math.pow(2,n)>parseInt(a.localStorage.getItem("maxMerge"))&&a.localStorage.setItem("maxMerge",Math.pow(2,n).toString())}}},r.restart=function(){console.log("restart");for(var o=0;o<4;o++)for(var e=0;e<4;e++)S.blockNum[o][e].destroy(),S.blockNum[o][e]=null;this.UINode.active=!1,null!=a.localStorage.getItem("hightestScore")&&null!=a.localStorage.getItem("hightestScore")&&(this.hightestScore.string=a.localStorage.getItem("hightestScore")),S.nowScore=0,this.nowScore.string=S.nowScore.toString(),null!=a.localStorage.getItem("maxMerge")&&null!=a.localStorage.getItem("maxMerge")&&(this.maxMergeScore.string=a.localStorage.getItem("maxMerge")),this.createBlock()},r.backToLobby=function(){window.location.href="https://jimmytes.github.io/gameLobby/"},e}(N)).prototype,"numBlock",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"hightestScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(C.prototype,"nowScore",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(C.prototype,"maxMergeScore",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(C.prototype,"UINode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/gVariable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(l){"use strict";var n,u,t,e;return{setters:[function(l){n=l.inheritsLoose},function(l){u=l.cclegacy,t=l._decorator,e=l.Component}],execute:function(){var r,o;u._RF.push({},"c1a8aA5NLFHfLdqFmU5plG3","gVariable",void 0);var a=t.ccclass;t.property,l("gVariable",a("gVariable")(((o=function(l){function u(){return l.apply(this,arguments)||this}n(u,l);var t=u.prototype;return t.start=function(){},t.update=function(l){},u}(e)).generateNum=[2,4],o.keyBoard={up:38,down:40,right:39,left:37},o.blockNum=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],o.blockPos={0:{0:{X:-180,Y:180},1:{X:-60,Y:180},2:{X:60,Y:180},3:{X:180,Y:180}},1:{0:{X:-180,Y:60},1:{X:-60,Y:60},2:{X:60,Y:60},3:{X:180,Y:60}},2:{0:{X:-180,Y:-60},1:{X:-60,Y:-60},2:{X:60,Y:-60},3:{X:180,Y:-60}},3:{0:{X:-180,Y:-180},1:{X:-60,Y:-180},2:{X:60,Y:-180},3:{X:180,Y:-180}}},o.nowScore=0,r=o))||r);u._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./block.ts","./gVariable.ts","./game.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});